DocTool Markup language
============
2019-02-12





Summary
===========

- [Introduction](#introduction)
- [Block level tags](#block-level-tags)
    - [The value and the body](#the-value-and-the-body)
    - [List of block-level tags with values](#list-of-block-level-tags-with-values)
    - [List of block-level stand-alone tags](#list-of-block-level-stand-alone-tags)
    - TODO
    
- [Inline functions](#inline-level-functions)
    - TODO






Introduction
=============

**DocTool** is a markup language used to ease the process of documenting an oop project.

It is built on top of markdown, so you can use any markdown notation you would like.

The **docTool** notation is meant to be written inside php doc comments (i.e. comments starting
with (/**), and so it make uses of **tags** (for instance the well-known "@return" tag).  


It uses two different types of tags:

- block-level tags
- inline-level tags (aka inline functions)






Block level tags
==================

A block tag is composed of one or more lines.
The first line is called **tag head line**, while subsequent lines
are called **tag body lines**. 


- block level tag:
    - tag head line
    - ?tag body line
    - ?tag body line
    - ...
    
    
The tag head line starts with the @ symbol followed by the tag name (for instance @var or @return).



Some tags have value associated with them, some other tags are stand-alone (meaning they stand alone on their line). 

For instance, the @var tag is a tag with a value associated to it:


```php
/**
* @return string 
*/
```

The word "string" is the value of the "@return" tag.


And here is an example of a standalone tag:

```php
/**
* @implementation
*/
```



The value and the body
-------------------


For the tags which have a value (i.e. not the stand-alone tags), the value is 
the part of the tag head line which follows the tag name.

And the body is the concatenated body lines.

Note: both the value and the body are trimmed.


However if an "ending sentence dot" is found on the tag head line, the value stops at this dot, and what follows on the same line
is the beginning of the body of the tag.


By "ending sentence dot" I mean a dot which naturally ends a sentence (a dot followed by a whitespace or a dot ending the line). 


So for instance in the following example:


```php
/**
* @var string = "mama" 
 *      The mama string doesn't have a papa yet.
*/
```

The value is:

```txt
string = "mama" 
``` 

and the body is:

```txt
The mama string doesn't have a papa yet.
```



But in the following example:
```php
/**
* @var string = "mama". I will start here rather.
 *      The mama string doesn't have a papa yet.
*/
```

The value is:

```txt
string = "mama" 
``` 

And the body is:

```txt
I will start here rather.
The mama string doesn't have a papa yet.
```





 


List of block-level tags with values
-------------------------



- var: the property var tag (see "the property var tag" section for more info)
- param: generated by phpstorm for method args. Indicate the variable name preceded by its type when not a string.
- return: indicates the return type of a function. See the "return tag" section for more info. 
- type: same as var
- image: relative url to an image. The root dir for images is set elsewhere.
        Multiple images can be passed by rewriting the same tag multiple times.

        


- link: provided by phpStorm: allows to create a link to a resource
- sameAs: indicates the method (or the\class:method) which should serve as a base for this method documentation.
            Tags in the current (i.e. not the base) method override the corresponding ones in the base method.
- see: used by phpStorm. Links to an external element.
            Is preferred over seeClass, but both should be parsed.
            Available elements are:
                   - class: using \Jin\Configuration\ConfigurationVariableFileParser notation
                   - methods: using \Jin\Configuration\ConfigurationVariableFileParser::setProfile notation

- seeProperty: point to the name of a property in the same class.
- seeMethod: point to the name of another method in the same class, or an external class.
        Will translate to a "See also $linkToOtherMethod" text in the final documentation.
        To add multiple methods, separate them with a comma.
        To indicate a method from the same class (including parents), just type the method name.
        To indicate a method from an external class, type the class path, colon, and then the method name,
        like this for instance: Jin\Log\Listener\FileLoggerListener:listen
- seeClass: links to another class. Example: @seeClass: Jin\Log\Logger.
            Note: this tag can be used in class description (class top comment) as well
            (see example in Jin\HttpRequestLifecycle\PreRouting\StatLog.php).
            This tag can be used multiple times.



List of block-level stand-alone tags
-----------------------

- implementation: indicates that this method implements an interface, and that
        the method documentation should be the same as the method of the
        same name in the interface, except for the tags that the method might re-define (which would override
        the interface method's counterpart).
        
- overrides: similar to imlementation, but indicates that this is an override rather than an implementation of an interface.
- overrideMe: indicates that this method could/should be overridden by the user.  




The property var tag
-----------------


- ```<@var> <type> <variable>? (<=> <defaultValue> (<alternatives>)?)?```  

With:
    - @var: string @var
    - type: the type of variable. A flag, or pipe separated combination of flags, amongst:
            - string
            - array
            - any object type (MyObject)
            - an array of any object type (```MyObject[]```)
            - bool
            - null
            - ...?
    - variable: the variable name preceded with the dollar symbol ($). This information is redundant, not required,
            and therefore not recommended, but it's accepted in order to be more permissive.
            
    - defaultValue: the default value of the variable if any.            
    - alternatives: the default values alternatives if relevant. This is a pipe separated values string (for instance red|blue|green).                      

Any complementary descriptive text should be set on the next line in the doc comment, and use proper case and punctuation.            



The method param tag
-----------------


- ```<@param> <type>? <variable> (<=> <defaultValue> (<alternatives>)?)?  (<.> <descriptiveText>)? ```  

With:
    - @var: string @var
    - type: the type of variable. A flag, or pipe separated combination of flags, amongst:
            - string
            - array
            - any object type (MyObject)
            - an array of any object type (```MyObject[]```)
            - bool
            - int
            - float
            - ...?
            
            
    - variable: the variable name preceded with the dollar symbol ($). 
    - defaultValue: the default value of the variable if any.            
    - alternatives: the default values alternatives if relevant. This is a pipe separated values string wrapped with parenthesis.
            For instance (red|blue|green)            
    - descriptiveText: a complementary inline descriptive text, using proper case and punctuation.           
         
Any complementary descriptive text should be set on the next lines in the doc comment, and use proper case and punctuation.   
            


### Examples

#### Example #1: Simple property example.

```php
/**
 * This property holds the path to the Zeus template to use to render the report.
 *
 * @var string 
 */
protected $template;

```
#### Example #2: Property with default value and description.

```php
/**
 * This property holds the path to the Zeus template to use to render the report.
 *
 * @var string = red (red|green|blue)
 */
protected $template;

```


The method return tag
---------------

The return tag @return is used in methods doc comment to indicate the return
of the method.

To get the best out of the automation tool (that will generate the docs for us),
it should be formatted like this:

- ```<@return> <type> (<.> <description>)?```

With:

- @return: the string "@return"
- type: a pipe separated values string indicating the possible return types of the method.
        Possible values are:
        - array
        - false
        - true
        - bool
        - null
        - string
        - mixed (when in doubt)
        - any php object (MyObject)
        - an array of any php object (MyObject[])
        - ...?
        
- description: a description sentence, with proper case and punctuation. 

Any complementary descriptive text should be set on the next lines in the doc comment, and use proper case and punctuation.





Inline functions
===============


All inline-level tags have the same notation:

- notation: ```<@> <functionName> <(> <argsList>  <)> ```

With:
    - functionName, the name of the function.
        Allowed chars: alpha-numeric chars, underscores.
    - argsList, a comma separated list of arguments.
        Each argument is a string.
        Allowed chars for an argument: every character except the closing parenthesis ")" and the comma ",".

        To write an actual closing parenthesis or comma inside an argument, we use the following aliases:
        - closing parenthesis: __closing_parenthesis__
        - comma: __comma__



When an inline function cannot be resolved, it is ignored.


The following functions are meant to be used inside a description text.

- $className: will be transformed into a link to the $className's doc page.
- @link($text, $url): will be transformed into a link to the given $url, with the text $text.
- $keyword: a link to the keyword's most appropriate page or anchor will be made. The $keyword argument's resolution url would be defined in a map elsewhere.
- $keyword: an alias for @keyword.
- $keyword: an alias for @keyword.
- $keyword: an alias for @keyword.
- $keyword: an alias for @keyword.




Functions
=========
Apart from the tags, you also can use the following inline mechanisms, inline meaning that you can use them in the text directly (i.e.
you don't have to declare them at the beginning of the line).

Note: the difficulty with inline notation is that we are still trying have a clean documentation in our class (because developers will look
into the source code), and so the inline notation shouldn't have too much cryptic parameters (which would make reading the documentation
a pain), so we try to be as transparent as possible when adding our functions, at the cost of not having a fully featured function.


- {-link-}: a link to create for the wrapped word. The target page should be defined elsewhere (in a configuration file, depending on
            the wrapped word and possibly the page from which it has been found).
            Note: we don't want to surcharge the link notation with parameters, as explained above.









Conventions
===========

For all @info text, punctuation should be respected (i.e. period is expected at the end
of lines).
Also for all human comments in class, punctuation is expected.



properties
-----------


For properties @info, you can start with:
- This property holds...
- This property holds whether the system tray entry is visible


If not specified, the type of a property is string.

The type of a property can be specified with:

- the @type tag  
- the @param tag ?? todo  
- ... ??todo



methods
----------

For methods @info, you start directly with a verb at the third person:

- Constructs a QSystemTrayIcon object with the given icon and parent.
- Removes the icon from the system tray and frees all allocated resources.
- ...


class
-------

For @info, you can start with:
- The XXX class ...
- The QSystemTrayIcon class provides an icon for an application in the system tray.